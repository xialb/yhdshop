"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var LocationIsId=function(){function t(){_classCallCheck(this,t),this.index=document.querySelector(".hd_top_bar .hd_topbar_city span"),this.init()}return _createClass(t,[{key:"init",value:function(){console.log(location.href),-1==location.href.indexOf("goodsId=")&&$(this.index).click()}}]),t}();new LocationIsId;var SearchBoxOver=function(){function t(){_classCallCheck(this,t),this.box=document.getElementById("hd_search"),this.init()}return _createClass(t,[{key:"init",value:function(){this.box.onmouseleave=function(){this.parentElement.style.borderColor="#ff4040"}}}]),t}();new SearchBoxOver;var DisplayGoods=function(){function t(){_classCallCheck(this,t),this.bigimg=document.querySelector(".goods_img_box .bigimg_right img"),this.img=document.querySelector(".goods_img_box img"),this.name=document.querySelector(".goods_name em"),this.price=document.querySelector(".goods_price em"),this.url="../lib/json/index_goods.json",this.init()}return _createClass(t,[{key:"init",value:function(){for(var i=this,t=location.href.split("?")[1].split("&"),e=0;e<t.length;e++)"goodsId"==t[e].split("=")[0]&&(this.goodsId=t[e].split("=")[1]);ajaxGet(this.url,function(t){i.data=JSON.parse(t);for(var e=0;e<i.data.length;e++)i.data[e].goodsId==i.goodsId&&(i.name.innerHTML=i.data[e].name,i.img.src=i.data[e].img,i.price.innerHTML=i.data[e].price,i.bigimg.src=i.img.src,i.name.parentElement.parentElement.setAttribute("data-goodsId",i.goodsId))})}}]),t}();new DisplayGoods;var Magnifier=function(){function t(){_classCallCheck(this,t),this.span=document.querySelector(".img_move"),this.Sbox=document.querySelector(".goods_img_cont"),this.Bbox=document.querySelector(".bigimg_right"),this.Bimg=document.querySelector(".bigimg_right img"),this.init()}return _createClass(t,[{key:"init",value:function(){var i=this;this.Sbox.onmouseover=function(){i.span.style.display="block",i.Bbox.style.display="block"},this.Sbox.onmouseout=function(){i.span.style.display="none",i.Bbox.style.display="none"},this.Sbox.onmousemove=function(t){var e=t||window.event;i.mousePosX=e.offsetX,i.mousePosY=e.offsetY,i.spanPos()}}},{key:"spanPos",value:function(){this.span.style.left=this.mousePosX-this.span.offsetWidth/2+"px",this.span.style.top=this.mousePosY-this.span.offsetHeight/2+"px",this.span.offsetLeft<=0&&(this.span.style.left="0"),this.span.offsetLeft>=this.Sbox.offsetWidth-this.span.offsetWidth&&(this.span.style.left=this.Sbox.offsetWidth-this.span.offsetWidth+"px"),this.span.offsetTop<=0&&(this.span.style.top="0"),this.span.offsetTop>=this.Sbox.offsetHeight-this.span.offsetHeight&&(this.span.style.top=this.Sbox.offsetHeight-this.span.offsetHeight+"px"),this.imgMove()}},{key:"imgMove",value:function(){this.left=this.span.offsetLeft/this.Sbox.offsetWidth,this.top=this.span.offsetTop/this.Sbox.offsetHeight,this.Bimg.style.left=-this.Bimg.offsetWidth*this.left+"px",this.Bimg.style.top=-this.Bimg.offsetHeight*this.top+"px"}}]),t}();new Magnifier;var DisToast=function(){function t(){_classCallCheck(this,t),this.toast=document.getElementById("toast"),this.keepShop=document.querySelector("#toast .toast_text .toast_btn a:nth-of-type(1)"),this.close=document.querySelector("#toast .toast_text em"),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;this.keepShop.onclick=function(){$(t.toast).fadeOut(200)},this.close.onclick=function(){$(t.toast).fadeOut(200)}}}]),t}();new DisToast;var AddShopcar=function(){function t(){_classCallCheck(this,t),this.name=document.querySelector(".goods_name em"),this.price=document.querySelector(".goods_price em"),this.Bimg=document.querySelector(".bigimg_right img"),this.btn=document.querySelector(".add_shopcar_btn"),this.toast=document.querySelector("#toast"),this.url="../lib/interface/addwq.php",this.init()}return _createClass(t,[{key:"init",value:function(){var e=this;this.btn.onclick=function(){$.get(e.url,{id:e.btn.parentElement.parentElement.getAttribute("data-goodsId"),img:e.Bimg.src,price:e.price.innerHTML,name:e.name.innerHTML},function(t){JSON.parse(t);$(e.toast).fadeIn(200)})}}}]),t}();new AddShopcar;