"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var HelpList=function(){function e(){_classCallCheck(this,e),this.ele=document.querySelector(".register_header_right .header_help"),this.list=document.querySelector(".header_help .help_list"),this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.ele.onmouseover=function(){e.list.style.display="block"},this.ele.onmouseout=function(){e.list.style.display="none"}}}]),e}();new HelpList;var BgSwitch=function(){function e(){_classCallCheck(this,e),this.iconBox=document.querySelector("#register_main .bg_box").children,this.index=0,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;clearInterval(this.timer),this.timer=setInterval(function(){animate(e.iconBox[e.index],{opacity:0}),e.index++,e.index==e.iconBox.length&&(e.index=0),animate(e.iconBox[e.index],{opacity:50})},4e3)}}]),e}();new BgSwitch;var RegisterMove=function(){function e(){_classCallCheck(this,e),this.warningArr=document.querySelectorAll(".register_form .ipt_list li .ipt_warning_box"),this.aLi=document.querySelectorAll(".register_form .ipt_list li .ipt"),this.aTit=document.querySelectorAll(".ipt_list li .ipt .tit"),this.init()}return _createClass(e,[{key:"init",value:function(){for(var t=this,i=this,e=function(e){t.aLi[e].onclick=function(){i.titMove(e),i.warningB(e)}},s=0;s<this.aLi.length;s++)e(s)}},{key:"warningB",value:function(e){$(this.warningArr[e]).slideDown(400)}},{key:"titMove",value:function(e){animate(this.aTit[e],{left:-(this.aTit[e].offsetWidth+20)})}}]),e}();new RegisterMove;var RegularTest=function(){function e(){_classCallCheck(this,e),this.username=document.getElementById("username"),this.tel=document.getElementById("tel"),this.password=document.getElementById("password"),this.repassword=document.getElementById("repassword"),this.grade=document.querySelector(".ipt_grade em"),this.grade_cor=document.querySelectorAll(".ipt_grade span"),this.registerBtn=document.getElementById("register_btn"),this.toast=document.getElementById("toast"),this.flag=!0,this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.username.onblur=function(){e.usernameTest()},this.tel.onblur=function(){e.telTest()},this.password.oninput=function(){e.passwordTest()},this.repassword.onblur=function(){e.repasswordTest()},this.registerBtn.onclick=function(){e.registerSend()}}},{key:"registerSend",value:function(){var i=this;this.flag&&this.username.value&&this.password.value&&this.repassword.value&&this.tel.value?($(this.toast).fadeOut(200),ajaxPost("../lib/interface/register.php",function(e){if(1==(e=JSON.parse(e)).code)i.toast.innerHTML="手机号码已被注册",$(i.toast).fadeIn(200);else if(2==e.code)i.toast.innerHTML="用户名已被使用",$(i.toast).fadeIn(200);else if(3==e.code)i.toast.innerHTML="请重新尝试",$(i.toast).fadeIn(200);else if(0==e.code){i.toast.innerHTML="注册成功，三秒后自动跳转至登录",$(i.toast).fadeIn(200);var t="login.html?username="+i.username.value;setTimeout(function(){window.location.href=t,i.username.value=i.tel.value=i.password.value=i.repassword.value=i.grade.value=""},3e3)}},{username:this.username.value,password:this.password.value,tel:this.tel.value})):$(this.toast).fadeIn(200)}},{key:"usernameTest",value:function(){var e=this.username.value;/^[\u4e00-\u9fa5a-zA-Z0-9_]{4,20}$/.test(e)?(this.TestAnimate(this.username,"b"),this.flag=!0):(this.TestAnimate(this.username,"n"),this.flag=!1)}},{key:"telTest",value:function(){var e=this.tel.value;/^1[3456789]\d{9}$/.test(e)?(this.TestAnimate(this.tel,"b"),this.flag=!0):(this.TestAnimate(this.tel,"n"),this.flag=!1)}},{key:"passwordTest",value:function(){var e=this.password.value;if(/^[a-zA-Z0-9_]{6,20}$/.test(e)){this.flag=!0,this.TestAnimate(this.password,"b");var t=0,i=0,s=0,n=0;/\d/.test(e)&&(t=1),/[a-z]/.test(e)&&(i=1),/[A-Z]/.test(e)&&(s=1);switch(/_/.test(e)&&(n=1),t+i+s+n){case 1:this.grade_cor[0].style.background="#fa592e",this.grade.innerHTML="低";break;case 2:this.grade_cor[0].style.background="#f6ba52",this.grade_cor[1].style.background="#f6ba52",this.grade.innerHTML="中";break;case 3:this.grade_cor[0].style.background="#78ce2e",this.grade_cor[1].style.background="#78ce2e",this.grade_cor[2].style.background="#78ce2e",this.grade.innerHTML="高"}}else{for(var a=0;a<this.grade_cor.length;a++)this.grade_cor[a].style.background="#fff";this.TestAnimate(this.password,"n"),this.flag=!1}}},{key:"repasswordTest",value:function(){this.password.value==this.repassword.value?(this.TestAnimate(this.repassword,"b"),this.flag=!0):(this.TestAnimate(this.repassword,"n"),this.flag=!1)}},{key:"TestAnimate",value:function(e,t){"b"==t?($(this.toast).fadeOut(200),e.parentElement.nextElementSibling.style.background="none",e.parentElement.nextElementSibling.lastElementChild.style.opacity="0",animate(e.parentElement.nextElementSibling.firstElementChild,{opacity:100})):"n"==t&&(e.parentElement.nextElementSibling.style.background="#E4E4E4",e.parentElement.nextElementSibling.lastElementChild.style.opacity="1",e.parentElement.nextElementSibling.firstElementChild.style.opacity="0")}}]),e}();new RegularTest;